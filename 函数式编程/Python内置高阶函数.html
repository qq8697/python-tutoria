<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python 内置高阶函数 | Python Tutorial | Python 教程</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="python基础 python进阶 函数式编程 面向对象 面向对象高级 python高级应用 标准库 python web 网络爬虫 数据分析 机器学习 人工智能">
    <link rel="preload" href="/assets/css/0.styles.5d7dc79b.css" as="style"><link rel="preload" href="/assets/js/app.7982f4ec.js" as="script"><link rel="preload" href="/assets/js/2.5dc5b073.js" as="script"><link rel="preload" href="/assets/js/39.8f62b81f.js" as="script"><link rel="prefetch" href="/assets/js/10.654901ba.js"><link rel="prefetch" href="/assets/js/11.697c57a7.js"><link rel="prefetch" href="/assets/js/12.d02015cf.js"><link rel="prefetch" href="/assets/js/13.c16a62ce.js"><link rel="prefetch" href="/assets/js/14.de19a7a9.js"><link rel="prefetch" href="/assets/js/15.9d03d6f9.js"><link rel="prefetch" href="/assets/js/16.9418409b.js"><link rel="prefetch" href="/assets/js/17.4958f8b1.js"><link rel="prefetch" href="/assets/js/18.ee667b78.js"><link rel="prefetch" href="/assets/js/19.91a453ac.js"><link rel="prefetch" href="/assets/js/20.22cba70d.js"><link rel="prefetch" href="/assets/js/21.2f41d179.js"><link rel="prefetch" href="/assets/js/22.0a3b6da0.js"><link rel="prefetch" href="/assets/js/23.622b0455.js"><link rel="prefetch" href="/assets/js/24.7a864e77.js"><link rel="prefetch" href="/assets/js/25.ed0f3e11.js"><link rel="prefetch" href="/assets/js/26.9f090891.js"><link rel="prefetch" href="/assets/js/27.cc2758de.js"><link rel="prefetch" href="/assets/js/28.2d548cd6.js"><link rel="prefetch" href="/assets/js/29.db7ea4f5.js"><link rel="prefetch" href="/assets/js/3.b3e15418.js"><link rel="prefetch" href="/assets/js/30.97d17e6a.js"><link rel="prefetch" href="/assets/js/31.91c61511.js"><link rel="prefetch" href="/assets/js/32.b36028c4.js"><link rel="prefetch" href="/assets/js/33.41d545bd.js"><link rel="prefetch" href="/assets/js/34.2184c568.js"><link rel="prefetch" href="/assets/js/35.b646fa36.js"><link rel="prefetch" href="/assets/js/36.063e2e44.js"><link rel="prefetch" href="/assets/js/37.231692c9.js"><link rel="prefetch" href="/assets/js/38.ee6c3dd9.js"><link rel="prefetch" href="/assets/js/4.eb64ed62.js"><link rel="prefetch" href="/assets/js/40.a5e0f043.js"><link rel="prefetch" href="/assets/js/41.32cca7ae.js"><link rel="prefetch" href="/assets/js/42.cb388f2e.js"><link rel="prefetch" href="/assets/js/43.1c4c891a.js"><link rel="prefetch" href="/assets/js/44.01df042d.js"><link rel="prefetch" href="/assets/js/45.213858ad.js"><link rel="prefetch" href="/assets/js/46.7919d9c5.js"><link rel="prefetch" href="/assets/js/47.ceeba6ce.js"><link rel="prefetch" href="/assets/js/48.9e691e9e.js"><link rel="prefetch" href="/assets/js/49.e0129794.js"><link rel="prefetch" href="/assets/js/5.e7a472e3.js"><link rel="prefetch" href="/assets/js/50.829ee76e.js"><link rel="prefetch" href="/assets/js/51.09644ef8.js"><link rel="prefetch" href="/assets/js/52.76616846.js"><link rel="prefetch" href="/assets/js/53.1890f762.js"><link rel="prefetch" href="/assets/js/54.462975c8.js"><link rel="prefetch" href="/assets/js/55.0c16b1f3.js"><link rel="prefetch" href="/assets/js/56.264cfd64.js"><link rel="prefetch" href="/assets/js/57.afc88876.js"><link rel="prefetch" href="/assets/js/58.fa5ea1e9.js"><link rel="prefetch" href="/assets/js/59.39e09b5a.js"><link rel="prefetch" href="/assets/js/6.4a7ee40c.js"><link rel="prefetch" href="/assets/js/60.4810d7a9.js"><link rel="prefetch" href="/assets/js/61.88c19a39.js"><link rel="prefetch" href="/assets/js/62.d57d7d71.js"><link rel="prefetch" href="/assets/js/63.ad544e5a.js"><link rel="prefetch" href="/assets/js/64.dd8a029c.js"><link rel="prefetch" href="/assets/js/65.e844bc83.js"><link rel="prefetch" href="/assets/js/66.0228e563.js"><link rel="prefetch" href="/assets/js/67.c8e3b05b.js"><link rel="prefetch" href="/assets/js/68.22a32741.js"><link rel="prefetch" href="/assets/js/69.1662777a.js"><link rel="prefetch" href="/assets/js/7.ae21527b.js"><link rel="prefetch" href="/assets/js/8.72e0f139.js"><link rel="prefetch" href="/assets/js/9.891adc7f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5d7dc79b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Python Tutorial | Python 教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          更多教程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://git.wuhongbin.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Git
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://mysql.wuhongbin.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mysql
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          更多作品
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://blog.wuhongbin.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://nav.wuhongbin.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端导航
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://snippet.wuhongbin.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  代码碎片
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://mark2web.wuhongbin.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mark2web
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/qq8697/python-tutorial" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          更多教程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://git.wuhongbin.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Git
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://mysql.wuhongbin.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mysql
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          更多作品
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://blog.wuhongbin.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://nav.wuhongbin.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端导航
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://snippet.wuhongbin.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  代码碎片
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://mark2web.wuhongbin.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mark2web
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/qq8697/python-tutorial" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>简介与环境搭建</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/简介与环境搭建/简介.html" class="sidebar-link">简介</a></li><li><a href="/简介与环境搭建/环境搭建.html" class="sidebar-link">环境搭建</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Python 基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Python基础/基本概念.html" class="sidebar-link">基本概念</a></li><li><a href="/Python基础/变量和基本数据类型.html" class="sidebar-link">变量和基本数据类型</a></li><li><a href="/Python基础/数据结构.html" class="sidebar-link">数据结构</a></li><li><a href="/Python基础/流程控制.html" class="sidebar-link">流程控制</a></li><li><a href="/Python基础/函数.html" class="sidebar-link">函数</a></li><li><a href="/Python基础/模块和包.html" class="sidebar-link">模块和包</a></li><li><a href="/Python基础/异常处理.html" class="sidebar-link">异常处理</a></li><li><a href="/Python基础/文件操作.html" class="sidebar-link">文件操作</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>面向对象</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/面向对象/封装.html" class="sidebar-link">封装</a></li><li><a href="/面向对象/继承.html" class="sidebar-link">继承</a></li><li><a href="/面向对象/多态.html" class="sidebar-link">多态</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Python 进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Python进阶/命名空间和变量的作用域.html" class="sidebar-link">命名空间和变量的作用域</a></li><li><a href="/Python进阶/Python特性.html" class="sidebar-link">Python特性</a></li><li><a href="/Python进阶/虚拟环境.html" class="sidebar-link">虚拟环境</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>函数式编程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/函数式编程/函数式编程概念.html" class="sidebar-link">函数式编程概念</a></li><li><a href="/函数式编程/函数式编程技术.html" class="sidebar-link">函数式编程技术</a></li><li><a href="/函数式编程/装饰器.html" class="sidebar-link">装饰器</a></li><li><a href="/函数式编程/偏函数.html" class="sidebar-link">偏函数</a></li><li><a href="/函数式编程/缓存函数.html" class="sidebar-link">缓存函数</a></li><li><a href="/函数式编程/Python内置高阶函数.html" class="active sidebar-link">Python内置高阶函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#python-内置高阶函数" class="sidebar-link">Python 内置高阶函数</a></li><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#一、-内置函数" class="sidebar-link">一、 内置函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#_1-map" class="sidebar-link">1. map</a></li><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#_2-filter" class="sidebar-link">2. filter</a></li><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#_3-sorted" class="sidebar-link">3. sorted</a></li><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#_4-enumerate" class="sidebar-link">4. enumerate</a></li><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#_5-zip" class="sidebar-link">5. zip</a></li><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#_6-any-和-all" class="sidebar-link">6. any 和 all</a></li></ul></li><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#二、itertools-模块-为高效循环而创建迭代器的函数" class="sidebar-link">二、itertools 模块 为高效循环而创建迭代器的函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#创建新的迭代器" class="sidebar-link">创建新的迭代器</a></li><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#对元素使用函数" class="sidebar-link">对元素使用函数</a></li><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#选择元素" class="sidebar-link">选择元素</a></li><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#排列组合" class="sidebar-link">排列组合</a></li><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#为元素分组" class="sidebar-link">为元素分组</a></li></ul></li><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#三、functools-模块" class="sidebar-link">三、functools 模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#_1-reduce" class="sidebar-link">1. reduce</a></li><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#_2-partial" class="sidebar-link">2. partial</a></li><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#_3-lru-cache" class="sidebar-link">3. lru_cache</a></li></ul></li><li class="sidebar-sub-header"><a href="/函数式编程/Python内置高阶函数.html#参考文档" class="sidebar-link">参考文档</a></li></ul></li><li><a href="/函数式编程/使用itertools构建工具函数.html" class="sidebar-link">使用itertools构建工具函数</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>面向对象高级</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/面向对象高级/再议封装.html" class="sidebar-link">再议封装</a></li><li><a href="/面向对象高级/再议继承.html" class="sidebar-link">再议继承</a></li><li><a href="/面向对象高级/类特殊成员.html" class="sidebar-link">类特殊成员</a></li><li><a href="/面向对象高级/迭代器与生成器.html" class="sidebar-link">迭代器与生成器</a></li><li><a href="/面向对象高级/上下文管理器.html" class="sidebar-link">上下文管理器</a></li><li><a href="/面向对象高级/限制实例的属性.html" class="sidebar-link">限制实例的属性</a></li><li><a href="/面向对象高级/property属性.html" class="sidebar-link">property属性</a></li><li><a href="/面向对象高级/type和元类.html" class="sidebar-link">type和元类</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Python 高级</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Python高级/正则表达式.html" class="sidebar-link">正则表达式</a></li><li><a href="/Python高级/线程.html" class="sidebar-link">线程</a></li><li><a href="/Python高级/进程.html" class="sidebar-link">进程</a></li><li><a href="/Python高级/协程.html" class="sidebar-link">协程</a></li><li><a href="/Python高级/异步编程.html" class="sidebar-link">异步编程</a></li><li><a href="/Python高级/socket套接字.html" class="sidebar-link">socket套接字</a></li><li><a href="/Python高级/UDP和TCP协议.html" class="sidebar-link">UDP和TCP协议</a></li><li><a href="/Python高级/HTTP协议.html" class="sidebar-link">HTTP协议</a></li><li><a href="/Python高级/数据库.html" class="sidebar-link">数据库</a></li><li><a href="/Python高级/SQL语句.html" class="sidebar-link">SQL语句</a></li><li><a href="/Python高级/MySQL数据库.html" class="sidebar-link">MySQL数据库</a></li><li><a href="/Python高级/pymysql模块.html" class="sidebar-link">pymysql模块</a></li><li><a href="/Python高级/SQLite数据库.html" class="sidebar-link">SQLite数据库</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>标准库和第三方模块</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/标准库和第三方模块/pickle_对象序列化.html" class="sidebar-link">pickle_对象序列化</a></li><li><a href="/标准库和第三方模块/copy_深拷贝和浅拷贝.html" class="sidebar-link">copy_深拷贝和浅拷贝</a></li><li><a href="/标准库和第三方模块/weakref_弱引用.html" class="sidebar-link">weakref_弱引用</a></li><li><a href="/标准库和第三方模块/datetime_日期和时间数据类型.html" class="sidebar-link">datetime_日期和时间数据类型</a></li><li><a href="/标准库和第三方模块/collections_集合数据类型.html" class="sidebar-link">collections_集合数据类型</a></li><li><a href="/标准库和第三方模块/enum_枚举数据类型.html" class="sidebar-link">enum_枚举数据类型</a></li><li><a href="/标准库和第三方模块/logging_日志服务.html" class="sidebar-link">logging_日志服务</a></li><li><a href="/标准库和第三方模块/加密验证服务.html" class="sidebar-link">加密验证服务</a></li><li><a href="/标准库和第三方模块/电子邮件.html" class="sidebar-link">电子邮件</a></li><li><a href="/标准库和第三方模块/SMTP发送邮件.html" class="sidebar-link">SMTP发送邮件</a></li><li><a href="/标准库和第三方模块/POP3接收邮件.html" class="sidebar-link">POP3接收邮件</a></li><li><a href="/标准库和第三方模块/结构化数据处理.html" class="sidebar-link">结构化数据处理</a></li><li><a href="/标准库和第三方模块/二进制数据处理.html" class="sidebar-link">二进制数据处理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Web 开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Web开发/WSGI.html" class="sidebar-link">WSGI</a></li><li><a href="/Web开发/实现简单Web框架.html" class="sidebar-link">实现简单Web框架</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>爬虫与数据分析</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>自动化运维与测试</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>人工智能和机器学习</span> <!----></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="python-内置高阶函数"><a href="#python-内置高阶函数" class="header-anchor">#</a> Python 内置高阶函数</h2> <h2 id="一、-内置函数"><a href="#一、-内置函数" class="header-anchor">#</a> 一、 内置函数</h2> <h3 id="_1-map"><a href="#_1-map" class="header-anchor">#</a> 1. map</h3> <p><code>map(function, iterable)</code> 接收两个参数，一个是函数，一个是可迭代对象，<code>map</code> 将传入的函数依次作用到可迭代对象中每一项，并把结果作为迭代器返回。</p> <p>示例，将函数 f(x)=x*x 作用在列表 <code>[1,2,3]</code> 的每一个元素上：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x

it <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Iterator 是惰性序列，可以通过 <code>list()</code> 函数让它把整个序列都计算出来并返回一个 <code>list</code>。<br>
ps. 使用列表推导式 <code>[f(x) for x in [1,2,3]]</code> 能达到同样的效果。</p> <h3 id="_2-filter"><a href="#_2-filter" class="header-anchor">#</a> 2. filter</h3> <p><code>filter(function, iterable)</code> 把传入的函数依次作用于可迭代对象中每一项，然后根据返回值是 <code>True</code> 还是 <code>False</code> 决定是否保留，把保留元素的集合作为迭代器返回。</p> <p>示例，保留列表中的偶数：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">is_even</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span>

it <span class="token operator">=</span> <span class="token builtin">filter</span><span class="token punctuation">(</span>is_even<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ps. 使用列表推导式 <code>[x for x in [1,2,3] if is_even(x)]</code> 能达到同样的效果。</p> <h3 id="_3-sorted"><a href="#_3-sorted" class="header-anchor">#</a> 3. sorted</h3> <p><code>sorted(iterable, key=None, reverse=False)</code> 返回排序后的列表，可以接收一个关键字参数 <code>key</code> 实现自定义的排序，<code>key</code> 指定的函数（带有单个参数）将作用于可迭代对象的每一个元素上，并根据其返回的结果进行排序。</p> <p>示例，自定义函数实现按成绩排序：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">order_by_score</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>

l <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Adam'</span><span class="token punctuation">,</span> <span class="token number">92</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Bart'</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Lisa'</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
r <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> key <span class="token operator">=</span> order_by_score<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>reverse = True</code> 反向排序：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">order_by_score</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>

l <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Adam'</span><span class="token punctuation">,</span> <span class="token number">92</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Bart'</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Lisa'</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
r <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> key <span class="token operator">=</span> order_by_score<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>番外：<strong>排序的稳定性</strong><br>
如果一个排序确保<strong>不会改变比较结果相等的元素的相对顺序</strong>就称其为稳定的 --&gt; 这有利于进行多重排序。（例如先按部门、再按薪级排序）</p> <p>示例，根据字典值的大小，对字典中的项排序：<br>
构造数据：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> random <span class="token keyword">import</span> randint

d <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> randint<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token string">'abcdef'</span><span class="token punctuation">}</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>利用 <code>zip</code> 将字典数据转化为元组后再使用 <code>sorted</code> 函数排序：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>r <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>或为 <code>sorted</code> 函数传递 <code>key</code> 参数：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>r <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_4-enumerate"><a href="#_4-enumerate" class="header-anchor">#</a> 4. enumerate</h3> <p><code>enumerate(iterable, start=0)</code> ，计数可迭代对象中的每一个元素，返回包含每个计数（从 <code>start</code> 开始）和元素构成的元组组成的集合，这个集合是一个枚举对象，也是迭代器对象。</p> <p>示例：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>seasons <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Spring'</span><span class="token punctuation">,</span> <span class="token string">'Summer'</span><span class="token punctuation">,</span> <span class="token string">'Fall'</span><span class="token punctuation">,</span> <span class="token string">'Winter'</span><span class="token punctuation">]</span>
it <span class="token operator">=</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>seasons<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [(0, 'Spring'), (1, 'Summer'), (2, 'Fall'), (3, 'Winter')]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_5-zip"><a href="#_5-zip" class="header-anchor">#</a> 5. zip</h3> <p><code>zip(iterableA, iterableB, ...)</code> 创建一个聚合了来自每个可迭代对象中的元素的迭代器。</p> <p>示例：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>seasons <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Spring'</span><span class="token punctuation">,</span> <span class="token string">'Summer'</span><span class="token punctuation">,</span> <span class="token string">'Fall'</span><span class="token punctuation">,</span> <span class="token string">'Winter'</span><span class="token punctuation">,</span> <span class="token string">'more?'</span><span class="token punctuation">]</span>
indexs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
it <span class="token operator">=</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>indexs<span class="token punctuation">,</span> seasons<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>所输入可迭代对象中最短的一个被耗尽时，迭代器将停止迭代。</p> <h3 id="_6-any-和-all"><a href="#_6-any-和-all" class="header-anchor">#</a> 6. any 和 all</h3> <p><code>any(iterable)</code> 和 <code>all(iterable)</code> 会查看一个可迭代对象内容的逻辑值。<code>any()</code> 在可迭代对象中任意一个元素为真时返回 <code>True</code>，而 <code>all()</code> 在所有元素为真时返回 <code>True</code>。</p> <h2 id="二、itertools-模块-为高效循环而创建迭代器的函数"><a href="#二、itertools-模块-为高效循环而创建迭代器的函数" class="header-anchor">#</a> 二、itertools 模块 为高效循环而创建迭代器的函数</h2> <p>包含很多常用的迭代器以及用来组合迭代器的函数，可以分为以下几类：</p> <h3 id="创建新的迭代器"><a href="#创建新的迭代器" class="header-anchor">#</a> 创建新的迭代器</h3> <ol><li><code>count(start=0, step=1)</code> 创建一个从 <code>start</code> 值开始，返回相隔 <code>step</code> 的值的迭代器。</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> <span class="token operator">*</span>

<span class="token comment"># count() # 0, 1, 2 ...</span>
<span class="token comment"># count(10) # 10, 11, 12 ...</span>
it <span class="token operator">=</span> count<span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment"># 2.5, 3.0, 3.5 ...</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">next</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">next</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="2"><li><code>cycle(iterable)</code> 创建一个循环重复返回 <code>iterable</code> 中所有元素的迭代器。</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> <span class="token operator">*</span>

it <span class="token operator">=</span> cycle<span class="token punctuation">(</span><span class="token string">'ABCD'</span><span class="token punctuation">)</span> <span class="token comment"># A, B, C, D, A, B, C, D ...</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">next</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">next</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="3"><li><code>repeat(elem[, n])</code> 返回所提供的元素 <code>n</code> 次，当 <code>n</code> 不存在时，返回无数次。</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> <span class="token operator">*</span>

it <span class="token operator">=</span> repeat<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment"># 10, 10, 10</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="4"><li><code>chain(*iterables)</code> 接受任意数量的可迭代对象作为输入，首先返回第一个迭代器的所有元素，然后是第二个的所有元素，如此一直进行下去，直到消耗掉所有输入的可迭代对象。</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> <span class="token operator">*</span>

it <span class="token operator">=</span> chain<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># a, b, c, 1, 2, 3</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="5"><li><code>islice(iterable, start, stop[, step])</code> 创建一个迭代器，返回从 <code>iterable</code> 里选中的元素。</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> <span class="token operator">*</span>

<span class="token comment"># islice('ABCDEFG', 2, None) # C, D, E, F, G</span>
it <span class="token operator">=</span> islice<span class="token punctuation">(</span><span class="token string">'ABCDEFG'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># A, C, E, G</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="6"><li><code>zip_longest(*iterables, fillvalue=None)</code>，与内置函数 <code>zip</code> 不同，迭代持续到耗光最长的可迭代对象才会停止，根据 <code>fillvalue</code> 填充缺失值。</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> <span class="token operator">*</span>

seasons <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Spring'</span><span class="token punctuation">,</span> <span class="token string">'Summer'</span><span class="token punctuation">,</span> <span class="token string">'Fall'</span><span class="token punctuation">,</span> <span class="token string">'Winter'</span><span class="token punctuation">,</span> <span class="token string">'more?'</span><span class="token punctuation">]</span>
indexs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
it <span class="token operator">=</span> zip_longest<span class="token punctuation">(</span>indexs<span class="token punctuation">,</span> seasons<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="对元素使用函数"><a href="#对元素使用函数" class="header-anchor">#</a> 对元素使用函数</h3> <ol><li><code>starmap(func, iterable)</code> 假定可迭代对象能够返回一个元组的流，并且利用这些元组作为参数来调用 <code>func</code>，和 <code>map()</code> 的区别可以类比 <code>func(*c)</code> 与 <code>func(a,b)</code>，前者对于函数的参数是元组。</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> <span class="token operator">*</span>

it <span class="token operator">=</span> starmap<span class="token punctuation">(</span><span class="token builtin">pow</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 32, 9, 1000</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>

it2 <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">pow</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it2<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x

it3 <span class="token operator">=</span> starmap<span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 32, 9, 1000</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it3<span class="token punctuation">)</span><span class="token punctuation">)</span>

it4 <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it4<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ol start="2"><li><code>accumulate(iterable[, func])</code>，参考 <a href="#_1-reduce">functools.reduce()</a>， 执行同样的计算, <code>reduce()</code> 只返回最终结果，<code>accumulate()</code> 会返回一个迭代器来输出所有中间结果。</li></ol> <h3 id="选择元素"><a href="#选择元素" class="header-anchor">#</a> 选择元素</h3> <ol><li><code>filterfalse(predicate, iterable)</code> 创建一个迭代器，只返回 <code>iterable</code> 中 <code>predicate</code> 为 <code>False</code> 的元素， 和 <code>filter()</code> 相反。</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> <span class="token operator">*</span>

<span class="token keyword">def</span> <span class="token function">is_even</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span>

it <span class="token operator">=</span> filterfalse<span class="token punctuation">(</span>is_even<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 1,3</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="2"><li><code>takewhile(predicate, iterable)</code> 创建一个迭代器，只要 <code>predicate</code> 为 <code>True</code>，就从可迭代对象中返回元素。</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> <span class="token operator">*</span>

it <span class="token operator">=</span> takewhile<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 1, 4</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="3"><li><code>dropwhile(predicate, iterable)</code> 创建一个迭代器，如果 <code>predicate</code> 为 <code>True</code>，迭代器丢弃这些元素，然后返回其他元素。</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> <span class="token operator">*</span>

it <span class="token operator">=</span> dropwhile<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 6, 4, 1</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="4"><li><code>compress(data, selectors)</code> 创建一个迭代器，它返回 <code>data</code> 中经 <code>selectors</code> 真值测试为 <code>True</code> 的元素。迭代器在两者较短的长度处停止。</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> <span class="token operator">*</span>

it <span class="token operator">=</span> compress<span class="token punctuation">(</span><span class="token string">'ABCDEF'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># '</span>A<span class="token string">', '</span>C<span class="token string">', '</span>E<span class="token string">', '</span>F'
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="排列组合"><a href="#排列组合" class="header-anchor">#</a> 排列组合</h3> <ol><li><code>combinations(iterable, r)</code> 返回由输入 <code>iterable</code> 中元素组成长度为 <code>r</code> 的子序列。</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> <span class="token operator">*</span>

it <span class="token operator">=</span> combinations<span class="token punctuation">(</span><span class="token string">'ABCD'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> 
<span class="token comment"># ('A', 'B'), ('A', 'C'), ('A', 'D'), ('B', 'C'), ('B', 'D'), ('C', 'D')</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>每个元组中的元素保持着可迭代对象的元素的顺序。在上面的例子中 <code>A</code> 总在 <code>B</code>、 <code>C</code>、 <code>D</code>之前。</p> <ol start="2"><li><code>permutations(iterable, r=None)</code> 返回由输入 <code>iterable</code> 中元素组成长度为 <code>r</code> 的子序列，取消了保持顺序的限制，返回所有可能的长度为 <code>r</code> 的排列。</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> <span class="token operator">*</span>

it <span class="token operator">=</span> permutations<span class="token punctuation">(</span><span class="token string">'ABCD'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>  
<span class="token comment"># ('A', 'B'), ('A', 'C'), ('A', 'D'), ('B', 'A'), ('B', 'C'), ('B', 'D'), </span>
<span class="token comment"># ('C', 'A'), ('C', 'B'), ('C', 'D'), ('D', 'A'), ('D', 'B'), ('D', 'C')</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="3"><li><code>product(*iterables, repeat=1)</code> 可迭代对象输入的笛卡儿积，大致相当于生成器表达式中的嵌套循环。</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> <span class="token operator">*</span>

it <span class="token operator">=</span> product<span class="token punctuation">(</span><span class="token string">'ABCD'</span><span class="token punctuation">,</span> <span class="token string">'xy'</span><span class="token punctuation">)</span> 
<span class="token comment"># ('A', 'x'), ('A', 'y'), ('B', 'x'), ('B', 'y'), ('C', 'x'), ('C', 'y'), </span>
<span class="token comment"># ('D', 'x'), ('D', 'y')</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="为元素分组"><a href="#为元素分组" class="header-anchor">#</a> 为元素分组</h3> <ol><li><code>groupby(iterable, key=None)</code> 从所依据的可迭代对象中连续地收集具有相同值的元素，然后返回一个长度为 2 的元组的数据流, 每个元组包含键值以及对应这个键值的元素所组成的迭代器。 <code>key_func(elem)</code> 是一个可以对迭代器返回的每个元素计算键值的函数。 如果你不提供这个键值函数，它就会简化成每个元素自身。</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> itertools <span class="token keyword">import</span> <span class="token operator">*</span>

relation_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'大同'</span><span class="token punctuation">,</span> <span class="token string">'山西'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'朔州'</span><span class="token punctuation">,</span> <span class="token string">'山西'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'忻州'</span><span class="token punctuation">,</span> <span class="token string">'山西'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'石家庄'</span><span class="token punctuation">,</span> <span class="token string">'河北'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'秦皇岛'</span><span class="token punctuation">,</span> <span class="token string">'河北'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'张家口'</span><span class="token punctuation">,</span> <span class="token string">'河北'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'开封'</span><span class="token punctuation">,</span> <span class="token string">'河南'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
<span class="token punctuation">(</span><span class="token string">'洛阳'</span><span class="token punctuation">,</span> <span class="token string">'河南'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'郑州'</span><span class="token punctuation">,</span> <span class="token string">'河南'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">get_province</span><span class="token punctuation">(</span>relation<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> relation<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>

ret <span class="token operator">=</span> groupby<span class="token punctuation">(</span>relation_list<span class="token punctuation">,</span> get_province<span class="token punctuation">)</span>
<span class="token keyword">for</span> province<span class="token punctuation">,</span> grouper <span class="token keyword">in</span> ret<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>province<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>grouper<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># ret-&gt; ('山西', grouper-A),('河北', grouper-B),('河南', grouper-C)</span>
<span class="token comment"># grouper-A -&gt; ('大同', '山西'), ('朔州', '山西'), ('忻州', '山西')</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="三、functools-模块"><a href="#三、functools-模块" class="header-anchor">#</a> 三、functools 模块</h2> <p>包含了一些高阶函数。（接受一个或多个函数作为输入，返回新的函数）</p> <h3 id="_1-reduce"><a href="#_1-reduce" class="header-anchor">#</a> 1. reduce</h3> <p><code>reduce(function, iterable[, initializer])</code> 把一个函数作用在一个 <code>iterable</code> 上，这个函数必须接收两个参数，<code>reduce</code> 把结果继续和 <code>iterable</code> 的下一个元素做累积计算，其效果就是 <code>reduce(f, [x1, x2, x3, x4]) = f(f(f(x1, x2), x3), x4)</code>。</p> <p>示例，使用 <code>reduce</code> 累加求和：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> functools <span class="token keyword">import</span> <span class="token operator">*</span>

<span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y

r <span class="token operator">=</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span>add<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>itertools</code> 模块的 <code>accumulate(iterable[, func])</code> 函数，执行同样的计算, 不同于 <code>reduce</code> 只返回最终结果，会返回一个迭代器来输出所有中间结果。</p> <p>示例，找到多个字典中的公共键：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># {'a': 3, 'd': 2, 'c': 1} 
# {'d': 3, 'a': 3, 'e': 3} 
# {'f': 4, 'd': 3, 'b': 3, 'a': 2, 'e': 4}
# =&gt; {'d', 'a'}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>构造数据：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> random <span class="token keyword">import</span> randint<span class="token punctuation">,</span> sample
data1 <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span> randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> sample<span class="token punctuation">(</span><span class="token string">'abcdefg'</span><span class="token punctuation">,</span>randint<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
data2 <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span> randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> sample<span class="token punctuation">(</span><span class="token string">'abcdefg'</span><span class="token punctuation">,</span>randint<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
data3 <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span> randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> sample<span class="token punctuation">(</span><span class="token string">'abcdefg'</span><span class="token punctuation">,</span>randint<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>data1<span class="token punctuation">,</span> data2<span class="token punctuation">,</span> data3<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>利用 <code>set</code> 的交集 <code>&amp;</code> 操作：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> functools <span class="token keyword">import</span> <span class="token builtin">reduce</span>
m <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">dict</span><span class="token punctuation">.</span>keys<span class="token punctuation">,</span> <span class="token punctuation">[</span>data1<span class="token punctuation">,</span> data2<span class="token punctuation">,</span> data3<span class="token punctuation">]</span><span class="token punctuation">)</span>
r <span class="token operator">=</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> a<span class="token punctuation">,</span>b<span class="token punctuation">:</span>a <span class="token operator">&amp;</span> b<span class="token punctuation">,</span> m<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol><li>使用字典的 <code>keys</code> 方法可以得到字典 <code>keys</code> 的集合，使用 <code>map</code> 函数，得到所有字典的 <code>keys</code> 的集合。</li> <li>使用 <code>functools</code> 模块的 <code>reduce</code> 函数，取所有字典的 <code>keys</code> 的集合的交集。</li></ol> <h3 id="_2-partial"><a href="#_2-partial" class="header-anchor">#</a> 2. partial</h3> <p><code>partial(func, *args, **keywords)</code> 通过给定部分参数，将已有的函数变形成新的函数。</p> <p>由 <code>log</code> 函数创建 <code>server_log</code> 函数：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> functools <span class="token keyword">import</span> <span class="token operator">*</span>

<span class="token keyword">def</span> <span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> system<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%s: %s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>system<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">)</span>

server_log <span class="token operator">=</span> partial<span class="token punctuation">(</span>log<span class="token punctuation">,</span> system<span class="token operator">=</span><span class="token string">'server'</span><span class="token punctuation">)</span>
server_log<span class="token punctuation">(</span><span class="token string">'Unable to open socket'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>说明：
返回的是 <code>partial</code> 对象，与 <code>function</code> 对象的类似之处在于都是可调用、可弱引用的对象并可拥有属性。区别在于前者不会自动创建 <code>__name__</code> 和 <code>__doc__</code> 属性；而且，在类中定义的 <code>partial</code> 对象的行为类似于静态方法，并且不会在实例属性查找期间转换为绑定方法。</p> <h3 id="_3-lru-cache"><a href="#_3-lru-cache" class="header-anchor">#</a> 3. lru_cache</h3> <p><code>lru_cache(maxsize=128, typed=False)</code> 一个为函数提供缓存功能的装饰器。</p> <p>说明：</p> <ul><li>LRU：最久未使用算法。</li> <li><code>lru_cache</code> 函数的参数
<ul><li><code>maxsize</code> 设置为 <code>None</code> ，LRU功能将被禁用且缓存数量无上限。；<code>maxsize</code> 设置为2的幂时可获得最佳性能。</li> <li><code>typed</code> 设置为 <code>True</code>，不同类型的函数参数将被分别缓存。例如， <code>f(3)</code> 和 <code>f(3.0)</code> 会被缓存两次。</li></ul></li> <li>被装饰函数的参数
<ul><li>由于使用了字典存储缓存，所以该函数的固定参数和关键字参数必须是可哈希的（即不可变数据类型）</li> <li>不同模式的参数会产生多个缓存项，例如, <code>f(a=1, b=2)</code> 和 f<code>(b=2, a=1)</code> 会被缓存两次。</li></ul></li> <li>装饰后函数的方法和属性
<ul><li><code>cache_info()</code> 返回一个具名元组，包含命中次数 hits，未命中次数 misses ，最大缓存数量 maxsize 和 当前缓存大小 currsize。（在多线程环境中，命中数与未命中数是不完全准确的。）</li> <li><code>cache_clear()</code> 用于清理/使缓存失效的函数。</li> <li><code>__wrapped__</code> 属性可以访问原始的未经装饰的函数。它可以用于检查、绕过缓存，或使用不同的缓存再次装饰原始函数。</li></ul></li></ul> <p>静态 Web 内容的 LRU 缓存示例:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">,</span> urllib<span class="token punctuation">.</span>error
<span class="token keyword">from</span> functools <span class="token keyword">import</span> <span class="token operator">*</span>

<span class="token decorator annotation punctuation">@lru_cache</span><span class="token punctuation">(</span>maxsize<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">get_pep</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;Retrieve text of a Python Enhancement Proposal&quot;&quot;&quot;</span>
    resource <span class="token operator">=</span> <span class="token string">'http://www.python.org/dev/peps/pep-%04d/'</span> <span class="token operator">%</span> num
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">with</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>resource<span class="token punctuation">)</span> <span class="token keyword">as</span> s<span class="token punctuation">:</span>
            <span class="token keyword">return</span> s<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> urllib<span class="token punctuation">.</span>error<span class="token punctuation">.</span>HTTPError<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'Not Found'</span>

<span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">290</span><span class="token punctuation">,</span> <span class="token number">308</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">218</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">279</span><span class="token punctuation">,</span> <span class="token number">289</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">9991</span><span class="token punctuation">:</span>
    pep <span class="token operator">=</span> get_pep<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>pep<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>get_pep<span class="token punctuation">.</span>cache_info<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>使用缓存在递归函数中的应用，斐波那契数列：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> functools <span class="token keyword">import</span> <span class="token operator">*</span>

<span class="token decorator annotation punctuation">@lru_cache</span><span class="token punctuation">(</span>maxsize<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">fib</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> n
  <span class="token comment"># if n % 2 == 0:</span>
    <span class="token comment">#    fib.cache_clear()</span>
    <span class="token keyword">return</span> fib<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> fib<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">[</span>fib<span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>fib<span class="token punctuation">.</span>cache_info<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="参考文档"><a href="#参考文档" class="header-anchor">#</a> 参考文档</h2> <ol><li>官网 <a href="https://docs.python.org/3.5/library/functions.html" target="_blank" rel="noopener noreferrer">内置函数<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> all any enumerate filter map zip sorted | <a href="https://docs.python.org/3.5/howto/sorting.html#sortinghowto" target="_blank" rel="noopener noreferrer">排序指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> | <a href="https://docs.python.org/3.5/library/itertools.html?highlight=itertools" target="_blank" rel="noopener noreferrer">itertools 模块<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> | <a href="https://docs.python.org/3.5/library/functools.html#module-functools" target="_blank" rel="noopener noreferrer">functools 模块<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/函数式编程/缓存函数.html" class="prev">
        缓存函数
      </a></span> <span class="next"><a href="/函数式编程/使用itertools构建工具函数.html">
        使用itertools构建工具函数
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.7982f4ec.js" defer></script><script src="/assets/js/2.5dc5b073.js" defer></script><script src="/assets/js/39.8f62b81f.js" defer></script>
  </body>
</html>
