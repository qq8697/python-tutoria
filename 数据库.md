# 关系型数据库
关系型数据库核心概念：
- 数据库：数据表的集合
- 数据表：数据行的集合
- 数据行：一条记录
- 数据列：数据表字段

## RDBMS （Relational Database Management System）关系型数据库管理系统
![RDBMS和数据库的关系](./images/rdbms.png)

## SQL（Structured Query Language）结构化查询语言
用来操作 关系型数据库 的语言，主要分为：
- DQL：**数据查询**语言，用于对数据进行查询，如 select
- DML：**数据操作**语言，对数据进行增加、修改、删除，如insert、udpate、delete
- TPL：事务处理语言，对事务进行处理，包括begin transaction、commit、rollback
- DCL：数据控制语言，进行授权与权限回收，如grant、revoke
- DDL：数据定义语言，进行**数据库、表的管理**等，如create、drop
- CCL：指针控制语言，通过控制指针完成表的操作，如declare cursor

# 数据库（表结构）设计
## E-R图（实体-联系图）
实体，对应数据库的一个表
关系，两个实体之间的关系，有：
- 一对一，一个表记录另一个表的主键。比如学生基本信息表和学生扩展信息表。
- 一对多，在“多”处记录“一”的主键。比如班级表和学生表。
- 多对多，新建表只有两个字段分别记录两个表的主键。比如学生表和课程表导出的学生选修课程表。

ps. 拆表，尽量少用外键，如果有外键完整性约束，需由程序控制

## 范式
第一范式：列的原子性，即不能再分割为其他几列
第二范式：必须完全依赖于主键，不能只依赖于主键的一部分
第三范式：非主键必须直接依赖于主键，不能存在传递依赖

订单明细表（订单ID、产品ID、单价、折扣、数量），一个订单可以包含多种产品，所以订单明细表的主键应该是（订单ID、产品ID），其中折扣、数量完全依赖主键（订单ID、产品ID），而单价只依赖与产品ID，即不符合第二范式。 -> 所以，拆分出产品表（产品ID、单价）和订单明细表（订单ID、产品ID、折扣、数量）

订单表（订单ID、订单日期、用户ID、用户名称、用户地址、用户城市），其主键是（订单ID），订单日期、用户ID、用户名称、用户地址、用户城市都完全依赖于主键，符合第二范式，但是用户名称、用户地址、用户城市直接依赖的是非主键用户ID，是通过传递才依赖于主键，不符合第三范式。 -> 所以，拆分出用户表（用户ID、用户名称、用户地址、用户城市）和订单表（订单ID、订单日期、用户ID）

![fanshi](./images/fanshi.png)


# 参考文档
2. [58到家数据库30条军规解读](https://mp.weixin.qq.com/s/Yjh_fPgrjuhhOZyVtRQ-SA)